// ==|== primary styles =======================================================
// Author: Curtis Dulmage
// ============================================================================

@font-face {
	font-family: 'Calibre Medium';
	src: local('Calibre Medium'),
		 local('Calibre-Medium'),
		 url('Calibre-Medium.otf');
}

// Foundation
// ----------------------------------------------------------------------------
html {
	font-family: 'Calibre Medium';
	// font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; // bug in FF causing 2 scrollbars?
}
body {
	position: relative;
	padding-left: 1.6rem;
	padding-right: 1.6rem;
	background-color: $hsl_bone;
}
::selection {
	color: $hsl_L100;
	background-color: $hsl_cyan;
}

/*
// + autoprefixer does not recognize placeholder + \\
::-webkit-input-placeholder {
	color: $hsl_L0;
}
::-moz-placeholder {
	color: $hsl_L0;
	opacity: 1;
}
:-ms-input-placeholder {
	color: $hsl_L0;
}
*/

// --- Lock Scrolling On Load --- \\
/*
html[data-overflow="locked"],
html[data-overflow="locked"] body {
	overflow-y: hidden;
}
*/
/*
html {
	min-height: 100%;
	overflow-y: scroll;
}
html[data-ready="waiting"] body {
	overflow-y: hidden;
}
html[data-ready="loaded"] body {
	overflow-y: visible;
}
*/

// Transitions & Animations
// ----------------------------------------------------------------------------
a,
div.cat_icon {
	transition: all 0.2s ease-in-out;
}
svg {
	transition: fill 0.2s ease-in-out;
}
/*
div.wrap_lines div {
	transition: background-color 0.3s ease-in-out;
}
*/
div.wrap_lines,
nav.nav_primary ul {
	transition: transform 0.3s ease-in-out;
}
div.wrap_lines div {
	transition: transform 0.3s ease-in-out, background-color 0.3s ease-in-out;
}

a.iso_link div.iso_logo img,
a.iso_link div.wrap_iso-image div.wrap_iso-title {
	transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out;
}


div.iso_loader,
nav.nav_primary,
nav.nav_categories ul {
	transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
}

// --- Animations --- \\
/*
@keyframes animSVG {
	to { stroke-dashoffset: 0; }
}
*/
@keyframes anim360 {
	to { transform: rotate(360deg); }
}
/*
@keyframes animFadeIn {
	to { opacity: 1; }
}
*/
@keyframes animShow {
	0%   { opacity: 0; }
	100% { opacity: 1; }
}
@keyframes animHide {
	0%   { opacity: 1; left: 0; }
	99%  { opacity: 0; left: 0; }
	100% { opacity: 0; left: -200%; }
}
@keyframes animWidth {
	0%   { width: 0%; opacity: 0; }
	100% { width: 100%; opacity: 1; }
}
@keyframes animSlideUp {
	0%   { opacity: 0; transform: translateY(2rem); }
	100% { opacity: 1; transform: translateY(0); }
}
@keyframes animBounceUp {
	0%   { opacity: 0; transform: translateY(4.8rem); }
	60%  { transform: translateY(-0.8rem); }
	100% { opacity: 1; transform: translateY(0); }
}
/*
@keyframes animShake {
	0%, 100% { transform: translate3d(0,0,0); }
	10%, 30%, 50%, 70%, 90% { transform: translate3d(-1rem,0,0); }
	20%, 40%, 60%, 80% { transform: translate3d(1rem,0,0); }
}
.animate_shake {
	animation: animShake 0.7s ease-in-out both;
}
*/

// CSS Loader
// ----------------------------------------------------------------------------
div.iso_loader {
	@include pos_cover(absolute, 300);

	background-color: $hsl_bone;

	opacity: 0;
	// visibility: hidden; // webkit will stop the animation if visibility is changed
	overflow: hidden;
	// pointer-events: none;

}
div.iso_loader.visible {
	opacity: 1;
}
div.iso_loader div.wrap_svg {
	position: absolute;
	z-index: 301;
	top: 6rem;
	// top: 0;
	// bottom: 0;
	left: 0;
	right: 0;
	margin: auto;
	width: 4.4rem;
	height: 4.4rem;
	animation: anim360 1s linear infinite forwards;
}
div.iso_loader div.wrap_svg svg {
	fill: $hsl_red;
}

html.ie9 div.iso_loader {
	display: none;
	visibility: hidden;
}

// General Styles
// ----------------------------------------------------------------------------
.wrap_element {
	position: relative;
}
// + SVGs + \\
#svgInject {
	display: none;
	visibility: hidden;
}
.wrap_svg {
	display: block;
}
.wrap_svg svg {
	width: 100%;
	height: 100%;
}
svg.svg_inline {
	display: inline; // chrome does not respect the [viewBox] selector
}
// --- Containers --- \\
[data-container] {
	margin-left: auto;
	margin-right: auto;
}
[data-container="width_1640"] {
	max-width: 164rem;
}
[data-container="width_1280"] {
	max-width: 128rem;
}
/*
// --- Links --- \\
a {
	color: $hsl_red;
}
a:hover {
	color: $hsl_navy;
}
a:active {
	color: darken($hsl_navy, 30%);
}
*/

// Header
// ----------------------------------------------------------------------------
header {
	padding-top: 8rem;
	padding-bottom: 3.2rem;
	text-align: center;
}
header h2 {
	font-size: 1.4rem;
	font-style: italic;
	font-weight: 700;
	line-height: 1.3;
	text-transform: uppercase;
	color: $hsl_navy;
}
// --- Main Logo --- \\
.logo_main {
	margin: 0 auto 3.2rem auto;
	max-width: 28.8rem;
}
.logo_main svg {
	margin-left: auto;
	margin-right: auto;
}
.logo_main svg.logo_sandwich {
	margin-bottom: 0.8rem;
	max-width: 34rem;
	width: 84%; // adjust height for mobile
	fill: $hsl_navy;
}
.logo_main svg.logo_video-rainbow {
	max-width: 19.8rem;
	width: 50%; // adjust height for mobile
}

// Nav Primary
// ----------------------------------------------------------------------------
nav.nav_primary {
	@include pos_cover(fixed, 400);
	@include toggle_visibility(off);
	display: table;
	width: 100%;
	height: 100%;
	background-color: $hsl_red;
}
nav.nav_primary ul {
	display: table-cell;
	width: 100%;
	vertical-align: middle;
	transform: perspective(60rem) rotateX(10deg) translateY(-5%);
}
nav.nav_primary ul li {
	margin-bottom: 2.4rem;
}
nav.nav_primary ul li.nav_twitter {
	margin-bottom: 0;
}
nav.nav_primary ul li a {
	font-size: 3rem;
	color: $hsl_bone;
}
// --- Nav Toggle --- \\
a.nav_toggle {
	display: block;
	position: absolute;
	z-index: 401;
	top: 2rem;
	left: 0;
	right: 0;
	margin: auto;
	padding: 1rem 0.4rem;
	width: 4rem; // 3.2rem
	height: 4rem; // 2rem
}
a.nav_toggle div.wrap_lines {
	position: relative;
	width: 100%;
	height: 100%;
}
a.nav_toggle div.wrap_lines div {
	position: absolute;
	height: 0.4rem;
	background-color: $hsl_navy;
}
a.nav_toggle div.wrap_lines div.line-1 {
	top: 0rem;
	left: 0;
}
a.nav_toggle div.wrap_lines div.line-2 {
	top: 0.8rem;
	right: 0;
}
a.nav_toggle div.wrap_lines div.line-3 {
	top: 1.6rem;
	left: 0;
}
// + toggled + \\
a.nav_toggle.toggled div.wrap_lines div {
	background-color: $hsl_bone;
}
a.nav_toggle.toggled div.wrap_lines {
	transform: rotate(180deg);
}
a.nav_toggle.toggled div.wrap_lines div.line-1 {
	transform: translateY(0.8rem) rotate(-45deg);
}
a.nav_toggle.toggled div.wrap_lines div.line-2 {
	background-color: hsla(0,0%,100%,0);
}
a.nav_toggle.toggled div.wrap_lines div.line-3 {
	transform: translateY(-0.8rem) rotate(45deg);
}
a.nav_toggle.toggled + nav.nav_primary {
	@include toggle_visibility(on);
}
a.nav_toggle.toggled + nav.nav_primary ul {
	transform: perspective(60rem) rotateX(0deg) translateY(0%);
}
// + interaction + \\
a.nav_toggle:hover div.wrap_lines div {
	background-color: $hsl_red;
}
a.nav_toggle.toggled:hover div.wrap_lines div.line-1,
a.nav_toggle.toggled:hover div.wrap_lines div.line-3 {
	background-color: $hsl_bone;
}
a.nav_toggle:active div.wrap_lines div {
	background-color: darken($hsl_red, 10%);
}
a.nav_toggle.toggled:active div.wrap_lines div.line-1,
a.nav_toggle.toggled:active div.wrap_lines div.line-3 {
	background-color: darken($hsl_bone, 10%);
}
// + nav links do not cycle colours until 768 + \\
nav.nav_primary ul li a:hover {
	color: $hsl_yellow;
}
nav.nav_primary ul li a:active {
	color: $hsl_aqua;
}

// Footer
// ----------------------------------------------------------------------------
footer {
	padding-top: 6rem;
	padding-bottom: 8rem;
	text-align: center;
}
footer h4 {
	font-size: 1.6rem;
	line-height: 1.3;
	color: $hsl_navy;
}
footer h4 a {
	color: $hsl_navy;
}
// + default transitions + \\
footer h4 a:hover {
	color: $hsl_red;
}
footer h4 a:active {
	color: darken($hsl_red, 10%);
}


// ==|== main styles ==========================================================
// ============================================================================

// Nav Categories
// ----------------------------------------------------------------------------

$unitCatHeight: 4rem;
$unitIconRight: 0.5rem;

nav.nav_categories {
	position: relative;
	z-index: 200;
	margin: 0 auto 3.2rem auto;
	max-width: 20rem;
}
// --- Dropdown Trigger --- \\
nav.nav_categories a.cat_trigger {
	display: block;
	height: $unitCatHeight;
	font-size: 1.6rem;
	line-height: 3.7rem; // reduced line-height to accomodate for borders
	color: $hsl_red;
	border: 0.2rem solid $hsl_red;
	border-radius: 1.3rem;
}
nav.nav_categories a.cat_trigger span {
	display: block;
	padding-left: 1.6rem;
	padding-right: 4.2rem;
	transform: translateY(0.1rem);
}
nav.nav_categories a.cat_trigger div.cat_icon {
	position: absolute;
	top: calc(4rem / 2 - 0.5rem);
	right: 1.6rem;
	width: 1rem;
	height: 1rem;
	background-color: $hsl_red;
	border-radius: 50%;
}
// --- Dropdown List --- \\
nav.nav_categories ul {
	@include toggle_visibility(off);
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	max-height: 28rem;
	overflow-y: scroll;
	-webkit-overflow-scrolling: touch;
	background-color: $hsl_red;
	border-radius: 1.3rem;
}
nav.nav_categories ul li a {
	display: block;
	padding: 1.2rem 1.6rem;
	font-size: 1.6rem;
	color: $hsl_bone;
	background-color: $hsl_red;
}
nav.nav_categories ul li a.selected {
	pointer-events: none;
	background-color: $hsl_yellow;
}
// + toggled + \\
nav.nav_categories.toggled ul {
	@include toggle_visibility(on);
}
// + interaction + \\
nav.nav_categories a.cat_trigger:hover {
	color: $hsl_orange;
	border-color: $hsl_orange;
}
nav.nav_categories a.cat_trigger:hover div.cat_icon {
	background-color: $hsl_orange;
}
// + cat links do not cycle colours until 768 + \\
nav.nav_categories ul li a:hover {
	background-color: $hsl_orange;
}
nav.nav_categories ul li a:active {
	background-color: $hsl_red;
}

// Isotope
// ----------------------------------------------------------------------------
section.iso_container {
	position: relative;
	z-index: 100;
}
div.iso_sizer,
article.iso_brick {
	width: calc(50% - 1rem);
}
div.iso_gutter {
	width: 2rem;
}
article.iso_brick {
	// float: left; // fallback style
	// position: relative;
	z-index: 101;
	margin-bottom: 2rem;
}
a.iso_link {
	display: block;
}
// + iso image + \\
a.iso_link div.wrap_iso-image {
	position: relative;
}

/*
a.iso_link div.wrap_iso-image img {
	opacity: 0.01;
}
*/

a.iso_link div.wrap_iso-image div.wrap_iso-title {
	display: none;
	background-color: $hsl_red; // default background-color
}
// + iso logo + \\
a.iso_link div.iso_logo {
	position: relative;
}
a.iso_link div.iso_logo img.iso_logo-on {
	@include pos_cover(absolute, 102);
	@include toggle_visibility(off);
}
// + interaction + \\
a.iso_link:hover div.iso_logo img.iso_logo-off {
	@include toggle_visibility(off);
}
a.iso_link:hover div.iso_logo img.iso_logo-on {
	@include toggle_visibility(on);
}

// Alternating Colours
// ----------------------------------------------------------------------------
// + red links + \\
a.iso_link.links_red div.wrap_iso-image div.wrap_iso-title { background-color: $hsl_red; }
footer h4 a.links_red:hover { color: $hsl_red; }
footer h4 a.links_red:active { color: darken($hsl_red, 20%); }
// + orange links + \\
a.iso_link.links_orange div.wrap_iso-image div.wrap_iso-title { background-color: $hsl_orange; }
footer h4 a.links_orange:hover { color: $hsl_orange; }
footer h4 a.links_orange:active { color: darken($hsl_orange, 20%); }
// + yellow links + \\
a.iso_link.links_yellow div.wrap_iso-image div.wrap_iso-title { background-color: $hsl_yellow; }
footer h4 a.links_yellow:hover { color: $hsl_yellow; }
footer h4 a.links_yellow:active { color: darken($hsl_yellow, 20%); }
// + aqua links + \\
a.iso_link.links_aqua div.wrap_iso-image div.wrap_iso-title { background-color: $hsl_aqua; }
footer h4 a.links_aqua:hover { color: $hsl_aqua; }
footer h4 a.links_aqua:active { color: darken($hsl_aqua, 20%); }
// + cyan links + \\
a.iso_link.links_cyan div.wrap_iso-image div.wrap_iso-title { background-color: $hsl_cyan; }
footer h4 a.links_cyan:hover { color: $hsl_cyan; }
footer h4 a.links_cyan:active { color: darken($hsl_cyan, 20%); }

// Page Load
// ----------------------------------------------------------------------------
/*
html:not(.ie9) header {
	// opacity: 0; // begin by setting opacity to 0 (if not IE9)
	animation: animShow 0.6s ease-in-out 0s both;
}
*/


// + header + \\
.logo_main svg.logo_sandwich {
	animation: animShow 0.8s ease-in-out 0.2s both;
}
.logo_main svg.logo_video-rainbow {
	animation: animShow 0.8s ease-in-out 0.6s both;
}
header h2 {
	animation: animShow 0.8s ease-in-out 1s both;
}

// + nav primary + \\
$numDelay: 0.6;
@for $i from 1 through 3 {

	a.nav_toggle div.wrap_lines div:nth-child(#{$i}) {
		animation: animWidth 0.6s ease-in-out #{$numDelay}s both;
	}

	$numDelay: $numDelay + 0.3;

}

// + nav categories + \\
html:not(.ie9) nav.nav_categories {
	// opacity: 0; // begin by setting opacity to 0 (if not IE9)
	animation: animShow 0.8s ease-in-out 1.2s both;
}